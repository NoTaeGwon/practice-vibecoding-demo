<svg width="1000" height="600" viewBox="0 0 1000 600" xmlns="http://www.w3.org/2000/svg">
  <defs>
    <style>
      .title { font: bold 20px sans-serif; }
      .subtitle { font: bold 14px sans-serif; }
      .label { font: 12px sans-serif; }
      .box { fill: #ffffff; stroke: #333333; stroke-width: 1.5; rx: 6; ry: 6; }
      .aws { fill: #fef6e7; }
      .client { fill: #e7f3ff; }
      .ci { fill: #eaf7ec; }
      .auth { fill: #f3e7ff; }
      .arrow { stroke: #333333; stroke-width: 1.5; fill: none; }
    </style>
    <marker id="arrowhead" markerWidth="10" markerHeight="7"
            refX="9" refY="3.5" orient="auto">
      <polygon points="0 0, 10 3.5, 0 7" fill="#333333" />
    </marker>
  </defs>

  <rect x="0" y="0" width="1000" height="600" fill="#ffffff" />

  <!-- Title -->
  <text x="500" y="40" text-anchor="middle" class="title">
    TODO 웹 앱 아키텍처 (React + AWS 서버리스)
  </text>

  <!-- Sections titles -->
  <text x="120" y="80" class="subtitle">클라이언트 / 호스팅</text>
  <text x="500" y="80" class="subtitle" text-anchor="middle">백엔드 (API / Lambda / DB)</text>
  <text x="870" y="80" class="subtitle" text-anchor="middle">인증 / CI/CD</text>

  <!-- Client: Browser -->
  <rect x="40" y="110" width="200" height="80" class="box client" />
  <text x="140" y="140" text-anchor="middle" class="label">사용자 브라우저</text>
  <text x="140" y="160" text-anchor="middle" class="label">React TODO SPA</text>

  <!-- Hosting: GitHub Pages -->
  <rect x="40" y="220" width="200" height="80" class="box client" />
  <text x="140" y="245" text-anchor="middle" class="label">정적 호스팅</text>
  <text x="140" y="265" text-anchor="middle" class="label">GitHub Pages</text>

  <!-- Arrow: Browser -> GitHub Pages (정적 파일 로드) -->
  <line x1="140" y1="190" x2="140" y2="220" class="arrow" marker-end="url(#arrowhead)" />

  <!-- Backend: API Gateway -->
  <rect x="380" y="110" width="240" height="70" class="box aws" />
  <text x="500" y="135" text-anchor="middle" class="label">API Gateway</text>
  <text x="500" y="155" text-anchor="middle" class="label">REST API /todos</text>

  <!-- Backend: Lambda -->
  <rect x="380" y="210" width="240" height="90" class="box aws" />
  <text x="500" y="235" text-anchor="middle" class="label">AWS Lambda (Node.js / TypeScript)</text>
  <text x="500" y="255" text-anchor="middle" class="label">create/list/update/delete Todo</text>

  <!-- Backend: DynamoDB -->
  <rect x="380" y="330" width="240" height="90" class="box aws" />
  <text x="500" y="355" text-anchor="middle" class="label">DynamoDB - TodoTable</text>
  <text x="500" y="375" text-anchor="middle" class="label">PK: userId, SK: todoId</text>

  <!-- Arrows: GitHub Pages -> API Gateway -->
  <line x1="240" y1="260" x2="380" y2="145" class="arrow" marker-end="url(#arrowhead)" />
  <text x="250" y="170" class="label">HTTPS API 호출</text>

  <!-- Arrows: API Gateway -> Lambda -->
  <line x1="500" y1="180" x2="500" y2="210" class="arrow" marker-end="url(#arrowhead)" />

  <!-- Arrows: Lambda -> DynamoDB -->
  <line x1="500" y1="300" x2="500" y2="330" class="arrow" marker-end="url(#arrowhead)" />

  <!-- Auth: Cognito -->
  <rect x="760" y="110" width="200" height="90" class="box auth" />
  <text x="860" y="135" text-anchor="middle" class="label">AWS Cognito</text>
  <text x="860" y="155" text-anchor="middle" class="label">User Pool</text>
  <text x="860" y="175" text-anchor="middle" class="label">로그인 / 회원가입 / JWT</text>

  <!-- CI/CD: GitHub Actions -->
  <rect x="760" y="230" width="200" height="90" class="box ci" />
  <text x="860" y="255" text-anchor="middle" class="label">GitHub Actions</text>
  <text x="860" y="275" text-anchor="middle" class="label">빌드 / 테스트 / 배포</text>

  <!-- Infra: AWS CDK -->
  <rect x="760" y="350" width="200" height="90" class="box ci" />
  <text x="860" y="375" text-anchor="middle" class="label">AWS CDK</text>
  <text x="860" y="395" text-anchor="middle" class="label">API / Lambda / DB / Cognito</text>

  <!-- Flows for Auth -->
  <!-- Browser <-> Cognito -->
  <!-- y 좌표를 조정하여 텍스트와 박스/화살표가 겹치지 않도록 함 -->
  <line x1="240" y1="120" x2="760" y2="135" class="arrow" marker-end="url(#arrowhead)" />
  <text x="500" y="105" text-anchor="middle" class="label">로그인 / 회원가입</text>

  <!-- Cognito -> API Gateway (Authorizer) -->
  <line x1="760" y1="190" x2="620" y2="145" class="arrow" marker-end="url(#arrowhead)" />
  <text x="690" y="165" class="label">JWT 검증</text>

  <!-- JWT 포함하여 API 호출 -->
  <!-- Lambda 박스와 텍스트가 겹치지 않도록 y 좌표를 위쪽으로 이동 -->
  <line x1="240" y1="220" x2="380" y2="160" class="arrow" marker-end="url(#arrowhead)" />
  <text x="330" y="200" class="label">Authorization: Bearer JWT</text>

  <!-- CI/CD Flows -->
  <!-- GitHub Actions -> GitHub Pages -->
  <!-- Lambda 박스를 가로지르지 않도록, Lambda와 DynamoDB 사이(y≈295)로 이동 -->
  <line x1="760" y1="295" x2="240" y2="295" class="arrow" marker-end="url(#arrowhead)" />
  <text x="500" y="285" text-anchor="middle" class="label">프론트엔드 빌드 &amp; 배포</text>

  <!-- GitHub Actions -> AWS CDK (deploy) -->
  <line x1="860" y1="320" x2="860" y2="350" class="arrow" marker-end="url(#arrowhead)" />
  <text x="880" y="335" class="label">cdk deploy</text>

  <!-- CDK -> AWS 리소스 그룹 화살표 (개념적) -->
  <line x1="760" y1="380" x2="620" y2="210" class="arrow" marker-end="url(#arrowhead)" />
  <line x1="760" y1="390" x2="620" y2="350" class="arrow" marker-end="url(#arrowhead)" />
  <line x1="760" y1="370" x2="620" y2="130" class="arrow" marker-end="url(#arrowhead)" />

  <!-- Legend -->
  <!-- 범례 박스: 가로를 줄이고 세로를 늘려서 공간 재조정 -->
  <rect x="40" y="430" width="360" height="160" class="box" />
  <text x="55" y="455" class="subtitle">범례</text>

  <rect x="55" y="470" width="20" height="14" class="box client" />
  <text x="85" y="482" class="label">클라이언트 / 호스팅 (브라우저, GitHub Pages)</text>

  <rect x="55" y="495" width="20" height="14" class="box aws" />
  <text x="85" y="507" class="label">AWS 백엔드 (API, Lambda, DynamoDB)</text>

  <rect x="55" y="520" width="20" height="14" class="box auth" />
  <text x="85" y="532" class="label">인증 (Cognito)</text>

  <rect x="55" y="545" width="20" height="14" class="box ci" />
  <text x="85" y="557" class="label">CI/CD &amp; 인프라 (GitHub Actions, CDK)</text>
</svg>


